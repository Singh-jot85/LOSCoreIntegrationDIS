{
    "validation_spec": "{}",
    "request_body_spec": "{\n    amountFinanced: ((.approved_amount) // null),\n    firstPaymentDate: ((.loan_approval.approved_first_payment_date) // null),\n    fundingDate: ((.funding_details.funding_date) // null),\n    initialDisbursement: (((.loan_approval.approved_amount // 0) - (.disbursements.remaining_amount // 0)) // null),\n    interestRatePercent: ((.loan_approval.approved_rate) // null),\n    loanId: ((if .loan_number then .loan_number | tonumber else null end) // null),\n    maturityDate: (\n        if ((.product.product_code | IN(\"SB_LOC\",\"EL_LOC\")) and .is_demand_loan)\n            then \"2099-12-30\"\n        else .maturity_date \n        end // null\n    ),\n    rateType: (.pricing_details[] ? | select(.term_position == \"term_1\") | (.rate_type) // null),\n    adjustmentPeriod: (null),\n    balloonPaymentAmount: ( if( .product.product_code == \"SB_TL\" and(\n    .pricing_details | map( select(\n    (.repayment_type == \"principal_and_interest\")\n    and (.amortization_in_months > .term_in_months))) |  length > 0 ) ) \n    then (\n        .loan_interfaces[]\n        | select(\n            .interface_type == \"sherman\"\n            and .is_latest == true\n            and .details.outLOAN_BUILDER?\n            and .details.outLOAN_BUILDER.AmTable?\n            and .details.outLOAN_BUILDER.AmTable.AmLine?\n    ) | (.details.outLOAN_BUILDER.AmTable.AmLine | max_by(.Idx) | .Pmt | tonumber)\n    ) else null end ),\n    finalPayment: (null),\n    firstPAndIPaymentAmount: (if(.product.product_code == \"SB_TL\" or .product.product_code == \"7A_TL\")  then ( .loan_interfaces[] | select(\n        .interface_type == \"sherman\"\n        and .is_latest == true\n        and .details.outLOAN_BUILDER.AmTable?\n        and .details.outLOAN_BUILDER.AmTable.AmLine?\n    ) | .details.outLOAN_BUILDER.AmTable.AmLine[] | select(.Idx == \"1\") | .Pmt | tonumber)\n    else null end\n    ),\n    firstPAndIPaymentDate: (.loan_approval.approved_first_payment_date // null),\n    fixedPrincipalAmount: (null),\n    guarantyPercent: ((.sba_express_details.sba_guaranty_percent) // null),\n    indexBaseRatePercent: (.pricing_details[] | select(.term_position == \"term_1\") | .prime_rate // null) ,\n    interestBasis: ($accrualMapping[ .accrual_method | tostring] // null),\n    interestRateCeilingPercent: ((.max_rate) // (.product.max_rate)),\n    interestRateFloorPercent: ((.min_rate) // (.product.min_rate)),\n    interestRateSpreadPercent: ((.differential_rate) // null),\n    interestRoundingMethod: (null),\n    interestRoundingPerDiem: (null),\n    lineOfCredit: (\n        if (.product.product_code | IN(\"SB_LOC\",\"EL_LOC\"))\n            then true \n        else false \n        end\n    ),\n    loanIdentifier: ((.core_integration_response.create_loan.response.responses.AccountNumber) // null | tostring),\n    nextInterestAdjustmentDate: (null),\n    nextReamortizationDate: (null),\n    paymentAmount: ((.loan_interfaces[]? | select(.interface_type == \"sherman\" and .is_latest == true) | .details.outLOAN_BUILDER.AmTable.AmLine[]? | select(.Idx == \"1\" ) | .Pmt | tonumber ) //0 ),\n    paymentFrequency: (.pricing_details[] | select(.term_position == \"term_1\") | .frequency // null),\n    paymentLateFeePercent: (null),\n    paymentType: (.pricing_details[] | select(.term_position == \"term_1\") | $repaymentTypeMapping[.repayment_type] // null ),\n    rateIndex: ((.pricing_details[] \n        | select(.term_position == \"term_1\" and .rate_index!=null)\n        | if (.index_period_type) then (\n            if (.index_period_type <= 5 and .rate_index == \"US Treasury Securities Rate\") \n                then  (\"Treasury5Year\")\n            elif (.index_period_type <= 5 and .rate_index == \"Treasury Constant Maturities\") \n                then (\"CMT5Year\")\n            else null end\n        ) else $rateIndexMapping[.rate_index] end // null) // null),\n    reamortizationPeriod: (null),\n    revolvingTermEndDate: (.revolving_term_end_date // null),\n    sba1502Status: (null),\n}",
    "response_body_spec": "{\n    apiSuccess: (if .responses | has(\"succeeded\") then .responses | .succeeded else false end),\n    errors: ((.responses | .messages) // null),\n    responses: (if .responses | .succeeded then \n        {\n            payments_account_id: .responses.result.id\n        } else null end\n    )\n}", 
    "request_body_spec_config": "{    \"accrualMapping\": {\n        \"310\": \"Actual360\",\n        \"320\": \"Actual365\",\n        \"201\": \"Even30DayMonths360\",\n        \"311\": \"Even30DayMonths365\"\n    },\n    \"repaymentTypeMapping\": {\n        \"principal_only\": \"FixedPrincipal\",\n        \"principal_and_interest\": \"PrincipalAndInterest\",\n        \"interest_only\": \"InterestOnly\"\n    },\n    \"rateIndexMapping\": {\n        \"Wall Street Journal Prime\": \"WallStreetJournalPrime\",\n        \"Federal Home Loan Banks\": \"FederalHomeLoanBankBoard\",\n        \"US Treasury Securities Rate\": \"Treasury10Year\",\n        \"Treasury Constant Maturities\": \"CMT10Year\",\n        \"SOFR\": \"Other\"\n    }\n}", 
    "response_body_spec_config": "{}"
}