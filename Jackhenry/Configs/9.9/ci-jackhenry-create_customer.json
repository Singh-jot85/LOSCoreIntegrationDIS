{
    "xsd_name": "TPG_CustomerMaster",
    "xml_template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n    <SOAP-ENV:Header>\n        <wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n            <wsse:UsernameToken xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">\n                <wsse:Username>{{XUserName}}</wsse:Username>\n                <wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">{{XPassword}}</wsse:Password>\n                <wsu:Created xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">{{current_timestamp}}</wsu:Created>\n            </wsse:UsernameToken>\n        </wsse:Security>\n    </SOAP-ENV:Header>\n    <SOAP-ENV:Body>\n        <CustAdd xmlns=\"http://jackhenry.com/jxchange/TPG/2008\">\n            <MsgRqHdr>\n                <jXchangeHdr>\n                    <JxVer />\n                    <AuditUsrId>{{XAuditUser}}</AuditUsrId>\n                    <AuditWsId>{{XAuditWorkStation}}</AuditWsId>\n                    <AuthenUsrId />\n                    <ConsumerName />\n                    <ConsumerProd />\n                    <Ver_1 />\n                    <jXLogTrackingId>{{guid}}</jXLogTrackingId>\n                    <Ver_2 />\n                    <InstRtId>{{XInstitutionRoutingID}}</InstRtId>\n                    <InstEnv>{{XEnvironment}}</InstEnv>\n                    <Ver_3 />\n                    <BusCorrelId>{{guid}}</BusCorrelId>\n                    <Ver_4 />\n                    <WorkflowCorrelId />\n                    <Ver_5 />\n                    <ValidConsmName>{{XValidConsumerName}}</ValidConsmName>\n                    <ValidConsmProd>{{XValidConsumerProduct}}</ValidConsmProd>\n                    <Ver_6 />\n                </jXchangeHdr>\n            </MsgRqHdr>\n            <ErrOvrRdInfoArray> \n                {% for ErrOvrRd in conditioningData.ErrOvrRds %}\n                <ErrOvrRd>\n                    <ErrCode>{{ErrOvrRd}}</ErrCode>\n                    <Ver_1 />\n                </ErrOvrRd> \n                {% endfor %}\n            </ErrOvrRdInfoArray>\n            <CustDetail>\n                <PersonName>\n                    <ComName>{{CustDetail.PersonName.ComName}}</ComName> \n                    {% if conditioningData.partyType == \"individual\" %}\n                    <FirstName>{{CustDetail.PersonName.FirstName}}</FirstName>\n                    <MiddleName>{{CustDetail.PersonName.MiddleName}}</MiddleName>\n                    <LastName>{{CustDetail.PersonName.LastName}}</LastName> \n                    {% endif %} \n                    {% if conditioningData.partyType == \"individual\" or conditioningData.isSoleProp == true %} \n                    <x_PersonName>\n                        <NameSuffix>{{CustDetail.PersonName.x_PersonName.NameSuffix}}</NameSuffix>\n                        <LegalName>{{CustDetail.PersonName.x_PersonName.LegalName}}</LegalName>\n                    </x_PersonName>\n                    {% endif %} \n                </PersonName>\n                <Addr>\n                    <StreetAddr1>{{CustDetail.Addr.StreetAddr1}}</StreetAddr1>\n                    <StreetAddr2>{{CustDetail.Addr.StreetAddr2}}</StreetAddr2>\n                    <City>{{CustDetail.Addr.City}}</City>\n                    <StateCode>{{CustDetail.Addr.StateCode}}</StateCode>\n                    <PostalCode>{{CustDetail.Addr.PostalCode}}</PostalCode>\n                    <DlvryPt>{{CustDetail.Addr.DlvryPt}}</DlvryPt>\n                </Addr>\n                <CustType>{{CustDetail.CustType}}</CustType> \n                {% if conditioningData.isSoleProp or conditioningData.partyType == \"entity\" %}\n                <NAICSCode>{{CustDetail.NAICSCode}}</NAICSCode>\n                {% endif %}\n                {% if conditioningData.partyType == \"individual\" %}\n                <BirthDt>{{CustDetail.BirthDt}}</BirthDt>\n                {% endif %}\n                {% if conditioningData.partyType ==\"individual\" or conditioningData.isSoleProp == true %}\n                <EmplName>{{CustDetail.EmplName}}</EmplName>\n                {% endif %}\n                <EmailArray>\n                    <EmailInfo>\n                        <EmailAddr>{{CustDetail.EmailArray.EmailInfo.EmailAddr}}</EmailAddr>\n                        <EmailType>Primary E-Mail</EmailType>\n                    </EmailInfo>\n                </EmailArray>\n                <PhoneArray>\n                    <PhoneInfo>\n                        <PhoneType>{{CustDetail.PhoneArray.PhoneInfo.PhoneType}}</PhoneType>\n                        <Ver_1 />\n                        <Ver_2 />\n                        <Ver_3 />\n                        <Ver_4 />\n                        <PhoneNum>{{CustDetail.PhoneArray.PhoneInfo.PhoneNum}}</PhoneNum>\n                    </PhoneInfo>\n                </PhoneArray>\n                <Custom />\n                <Ver_1 />\n                <Ver_2 />\n                <Ver_3 />\n                <Ver_4 />\n                <CrScoreArray>\n                    <CrScoreInfo>\n                        <CrScoreId>{{CustDetail.CrScoreArray.CrScoreInfo.CrScoreId}}</CrScoreId>\n                        <CrScoreModelCode />\n                        <Ver_1 />\n                    </CrScoreInfo>\n                </CrScoreArray>\n            </CustDetail>\n            <TaxDetail>\n                <TINInfo>\n                    <TINCode>{{TaxDetail.TINInfo.TINCode}}</TINCode>\n                    <TaxId>{{TaxDetail.TINInfo.TaxId}}</TaxId>\n                    <CertCode>{{TaxDetail.TINInfo.CertCode}}</CertCode>\n                    <CertCodeDt>{{TaxDetail.TINInfo.CertCodeDt}}</CertCodeDt>\n                </TINInfo>\n                {% if conditioningData.partyType == \"individual\" %} \n                <Alien>\n                    <CitzCntryType>{{TaxDetail.Alien.CitzCntryType}}</CitzCntryType>\n                </Alien>\n                {% endif %} \n                <Custom />\n\t\t\t\t<Ver_1 /> \n                <FedWithCode>{{TaxDetail.FedWithCode}}</FedWithCode>\n                <StateWithCode>{{TaxDetail.StateWithCode}}</StateWithCode>\n            </TaxDetail>\n            <BusDetail>\n                <BrCode>{{BusDetail.BrCode}}</BrCode>\n                <OffCode>{{BusDetail.OffCode}}</OffCode>\n                <CustCode>{{BusDetail.CustCode}}</CustCode>\n                <Ver_1 />\n\t\t\t\t<Ver_2 />\n\t\t\t\t<Ver_3 />\n\t\t\t\t<Ver_4 /> \n                {% if conditioningData.partyType == \"individual\" or conditioningData.isSoleProp == true %} \n                <InsiderCode>{{BusDetail.InsiderCode}}</InsiderCode> \n                {% endif %} \n                <NetWorthAmt>{{BusDetail.NetWorthAmt}}</NetWorthAmt>\n            </BusDetail>\n            <RegDetail> \n                {% if conditioningData.partyType == \"individual\" %} \n                <BenflOwnExclCode>{{RegDetail.BenflOwnExclCode}}</BenflOwnExclCode>\n                {% endif %}\n                <CRARec>\n                    <CRAStateCode>{{RegDetail.CRARec.CRAStateCode}}</CRAStateCode>\n                    <CRACountyCode>{{RegDetail.CRARec.CRACountyCode}}</CRACountyCode>\n                    <CRACenTract>{{RegDetail.CRARec.CRACenTract}}</CRACenTract>\n                    <CRASMSACode>{{RegDetail.CRARec.CRASMSACode}}</CRASMSACode>\n                    <CRALoc>{{RegDetail.CRARec.CRALoc}}</CRALoc>\n                    <CRAIncmLvl>{{RegDetail.CRARec.CRAIncmLvl}}</CRAIncmLvl>\n                </CRARec>\n                <Ver_1 />\n                <ReqLegalEntityType>{{RegDetail.ReqLegalEntityType}}</ReqLegalEntityType>\n                <Ver_2 />\n                <AnnRevenueAmt>{{RegDetail.AnnRevenueAmt}}</AnnRevenueAmt>\n            </RegDetail>\n        </CustAdd>\n    </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>",
    "xml_error_path": "s:Envelope/s:Body/s:Fault/detail/HdrFault/FaultRecInfoArray/FaultMsgRec/ErrDesc",
    "validation_spec": "{}",
    "xml_success_path": "s:Envelope/s:Body/CustAddResponse/CustId",
    "request_body_spec": "(\n(\n(\n(\n    . as $root |\n    $root.loan_relations[0] |\n    { \n        CustDetail: ( \n            {\n                PersonName: {\n                    ComName: (.full_name // \"\"),\n                    FirstName: (.first_name // \"\"),\n                    MiddleName: (.middle_name // \"\"),\n                    LastName:  (.last_name // \"\"),\n                    x_PersonName: {\n                        NameSuffix: (.suffix // \"\"),\n                        LegalName: (.business_name // \"\")\n                    }\n                },\n                Addr: (\n                    .relation_addresses[] | \n                    select(.address_type == \"permanent\") |\n                    {\n                        StreetAddr1: (.address_line_1 // \"\"),\n                        StreetAddr2: (.address_line_2 // \"\"),\n                        City: (.city // \"\"),\n                        StateCode: (.state // \"\"),\n                        PostalCode: (.zip_code // \"\"),\n                        DlvryPt: (.zip_code_plus4 // \"\"),\n                    }\n                ),\n                CustType: (\n                    if .party_type == \"individual\"\n                        then \"Y\"\n                    elif .party_type == \"entity\"\n                        then \"N\"\n                    else \"\"\n                    end\n                ),\n                NAICSCode: (.naics_code // \"\"),\n                BirthDt: (if .party_type == \"individual\" then .dob else \"\" end),\n                EmplName: ( .memberof // \"\"),\n                EmailArray: {\n                    EmailInfo: {\n                        EmailAddr: (\n                        if .email != \"\" and .email != \"\"\n                            then .email\n                        elif (\n                            .children != \"\" \n                            and (.children | length) > 0\n                        )\n                            then (\n                                .children[] \n                                | select(.relation_type == \"representative\") as $representative\n                                | if ($representative.email != \"\" and $representative.email != \"\")\n                                    then $representative.email\n                                else \"\"\n                                end\n                            )\n                        else \"\"\n                        end\n                        )\n                    }\n                },\n                PhoneArray: {\n                    PhoneInfo: {\n                        PhoneNum: (.work_phone | tostring // \"\"),\n                        PhoneExt: \"+1\",\n                        PhoneType: (\n                            if .party_type == \"individual\" \n                                then \"Home Cell Phone\"\n                            elif .party_type == \"entity\" \n                                then \"Business Phone\"\n                            else \"\" \n                            end\n                        )\n                    }\n                },\n                CrScoreArray: {\n                    CrScoreInfo: {\n                        CrScoreId: ($root.fico_score // \"\"),\n                    }\n                }\n            }\n        ),\n        TaxDetail: (\n            {\n                TINInfo: {\n                    TINCode: (\n                        if .party_type == \"individual\" \n                            then \"I\" \n                        elif .party_type == \"entity\" \n                            then \"T\" \n                        else \"\" \n                        end\n                    ),\n                    TaxId: (.tin // \"\"),\n                    CertCode: \"C\",\n                    CertCodeDt: (.created | split(\"T\")[0] // \"\")\n                },\n                Alien: {\n                    CitzCntryType: \"US\"\n                },\n                FedWithCode: \"0\",\n                StateWithCode: 0\n            }\n        ),\n        BusDetail: (\n            {\n                OffCode: ($root.details.cra_details?.branch_code // \"\"),\n                BrCode: \"51\",\n                CustCode: \"Q\",\n                InsiderCode: (\n                    if (\n                        .party_type == \"individual\" \n                        and .entity_type != \"sole_proprietor\"\n                    )\n                        then \"E\"\n                    else \"\"\n                    end\n                ),\n                LangType: \"English\",\n                NetWorthAmt: (\n                    if .details?.total_business_net_worth \n                        then .details?.total_business_net_worth\n                    else \"\"\n                    end\n                )\n            }\n        ),\n        RegDetail: (\n            {\n                CRARec: (\n                    $root.geocoding_details[0] | \n                    {\n                        CRAStateCode: (.state_code // \"\"),\n                        CRACountyCode: (.county_code // \"\"),\n                        CRACenTract: (.tract_code // \"\"),\n                        CRASMSACode: (.msa_code // \"\"),\n                        CRALoc: 1,\n                        CRAIncmLvl: 1,\n                    }\n                ),\n                ReqLegalEntityType: (\n                    if .party_type == \"individual\"\n                        then \"false\"\n                    elif .party_type == \"entity\"\n                        then \"true\"\n                    else \"\"\n                    end\n                ),\n                BenflOwnExclCode: (\n                    if .party_type == \"individual\"\n                        then \"NP\"\n                    else \"\"\n                    end\n                ),\n                AnnRevenueAmt: (\n                    .details?.annual_revenue // \"\"\n                )\n            }\n        ),\n        conditioningData:{\n            isSoleProp: (\n                if (\n                    .party_type == \"individual\" \n                    and .entity_type == \"sole_proprietor\" \n                    and .relation_type == \"borrower\"\n                    and (.is_collateral_related | not) \n                ) then true\n                else false\n                end\n            ),\n            ErrOvrRds: [410023, 410050, 410059, 410079, 410017, 400060],\n            entityType: (.entity_type // null),\n            partyType: (.party_type // null)\n        }\n    }\n)\n)\n)\n)",
    "response_body_spec": "{ apiSuccess: .apiSuccess, errors: { errorNum: (if (.errors.errorNum != \"\" and .errors.errorNum != null) then .errors.errorNum else null end), errorMsg: ((if (.errors.errorNum != \"\" and .errors.errorNum != null) then .errors.errorMsg.Error else null end)) }, responses: (if .apiSuccess == true then { customerid: .responses.Id } else null end) }",
    "request_body_spec_config": "{}",
    "response_body_spec_config": "{}"
}