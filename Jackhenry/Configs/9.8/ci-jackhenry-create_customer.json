{
    "validation_spec": "{}",
    "xsd_name": "TPG_CustomerMaster",
    "xml_template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SOAP-ENV:Envelope\n    xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n    <SOAP-ENV:Header>\n        <wsse:Security\n            xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"\n            xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n            <wsse:UsernameToken\n                xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">\n                <wsse:Username>{{XUserName}}</wsse:Username>\n                <wsse:Password\n                    Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">\n                    {{XPassword}}</wsse:Password>\n                <wsu:Created\n                    xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n                    {{current_timestamp}}</wsu:Created>\n            </wsse:UsernameToken>\n        </wsse:Security>\n    </SOAP-ENV:Header>\n    <SOAP-ENV:Body>\n        <CustAdd xmlns=\"http://jackhenry.com/jxchange/TPG/2008\">\n            <MsgRqHdr>\n                <jXchangeHdr>\n                    <JxVer />\n                    <AuditUsrId>{{XAuditUser}}</AuditUsrId>\n                    <AuditWsId>{{XAuditWorkStation}}</AuditWsId>\n                    <AuthenUsrId />\n                    <ConsumerName />\n                    <ConsumerProd />\n                    <Ver_1 />\n                    <jXLogTrackingId>{{guid}}</jXLogTrackingId>\n                    <Ver_2 />\n                    <InstRtId>{{XInstitutionRoutingID}}</InstRtId>\n                    <InstEnv>{{XEnvironment}}</InstEnv>\n                    <Ver_3 />\n                    <BusCorrelId>{{guid}}</BusCorrelId>\n                    <Ver_4 />\n                    <WorkflowCorrelId />\n                    <Ver_5 />\n                    <ValidConsmName>{{XValidConsumerName}}</ValidConsmName>\n                    <ValidConsmProd>{{XValidConsumerProduct}}</ValidConsmProd>\n                    <Ver_6 />\n                </jXchangeHdr>\n            </MsgRqHdr>\n            \n            <ErrOvrRdInfoArray>\n                {% for ErrOvrRd in conditioningData.ErrOvrRds %}\n                <ErrOvrRd>\n                    <ErrCode>{{ErrOvrRd}}</ErrCode>\n                    <Ver_1 />\n                </ErrOvrRd>\n                {% endfor %}\n            </ErrOvrRdInfoArray>\n            \n            <CustDetail>\n                <PersonName>\n                    <ComName>{{CustDetail.PersonName.ComName}}</ComName>\n\n                    {% if conditioningData.partyType == \"individual\" %}\n                    <FirstName>{{CustDetail.PersonName.FirstName}}</FirstName>\n                    <MiddleName>{{CustDetail.PersonName.MiddleName}}</MiddleName>\n                    <LastName>{{CustDetail.PersonName.LastName}}</LastName>\n                    {% endif %}\n\n\n                    {% if conditioningData.partyType == \"individual\" or conditioningData.isSoleProp\n                    == true %}\n                    <x_PersonName>\n                        <NameSuffix>{{CustDetail.PersonName.x_PersonName.NameSuffix}}</NameSuffix>\n                        <LegalName>{{CustDetail.PersonName.x_PersonName.LegalName}}</LegalName>\n                    </x_PersonName>\n                    {% endif %}\n\n                </PersonName>\n\n                <Addr>\n                    <StreetAddr1>{{CustDetail.Addr.StreetAddr1}}</StreetAddr1>\n                    <StreetAddr2>{{CustDetail.Addr.StreetAddr2}}</StreetAddr2>\n                    <City>{{CustDetail.Addr.City}}</City>\n                    <StateCode>{{CustDetail.Addr.StateCode}}</StateCode>\n                    <PostalCode>{{CustDetail.Addr.PostalCode}}</PostalCode>\n                    <DlvryPt>{{CustDetail.Addr.DlvryPt}}</DlvryPt>\n                </Addr>\n\n                <CustType>{{CustDetail.CustType}}</CustType>\n\n                {% if conditioningData.isSoleProp or conditioningData.partyType == \"entity\" %}\n                <NAICSCode>{{CustDetail.NAICSCode}}</NAICSCode>\n                {% endif %}\n\n                {% if conditioningData.partyType == \"individual\" %}\n                <BirthDt>{{CustDetail.BirthDt}}</BirthDt>\n                {% endif %}\n\n                {% if conditioningData.partyType == \"individual\" or conditioningData.isSoleProp == true %}\n                <EmplName>{{CustDetail.EmplName}}</EmplName>\n                {% endif %}\n\n                <EmailArray>\n                    <EmailInfo>\n                        <EmailAddr>{{CustDetail.EmailArray.EmailInfo.EmailAddr}}</EmailAddr>\n                        <EmailType>Primary E-Mail</EmailType>\n                    </EmailInfo>\n                </EmailArray>\n\n                <PhoneArray>\n                    <PhoneInfo>\n                        <PhoneType>{{CustDetail.PhoneArray.PhoneInfo.PhoneType}}</PhoneType>\n                        <Ver_1 />\n                        <Ver_2 />\n                        <Ver_3 />\n                        <Ver_4 />\n                        <PhoneNum>{{CustDetail.PhoneArray.PhoneInfo.PhoneNum}}</PhoneNum>\n                    </PhoneInfo>\n                </PhoneArray>\n\n                <CrScoreArray>\n                    <CrScoreInfo>\n                        <CrScoreId>{{CustDetail.CrScoreArray.CrScoreInfo.CrScoreId}}</CrScoreId>\n\n                        {% if conditioningData.partyType == \"entity\" %}\n                        <CertCode>{{CustDetail.CrScoreArray.CrScoreInfo.CertCode}}</CertCode>\n                        <CertCodeDt>{{CustDetail.CrScoreArray.CrScoreInfo.CertCodeDt}}</CertCodeDt>\n                        {% endif %}\n\n                    </CrScoreInfo>\n                </CrScoreArray>\n            </CustDetail>\n\n            <TaxDetail>\n                <TINInfo>\n                    <TINCode>{{TaxDetail.TINInfo.TINCode}}</TINCode>\n                    <TaxId>{{TaxDetail.TINInfo.TaxId}}</TaxId>\n\n                    {% if conditioningData.partyType == \"individual\" %}\n                    <CertCode>{{TaxDetail.TINInfo.CertCode}}</CertCode>\n                    <CertCodeDt>2025-08-06</CertCodeDt>\n                    {% endif %}\n\n                </TINInfo>\n\n                {% if conditioningData.partyType == \"individual\" %}\n                <Alien>\n                    <CitzCntryType>{{TaxDetail.Alien.CitzCntryType}}</CitzCntryType>\n                </Alien>\n                {% endif %}\n\n                <FedWithCode>{{TaxDetail.FedWithCode}}</FedWithCode>\n                <StateWithCode>{{TaxDetail.StateWithCode}}</StateWithCode>\n            </TaxDetail>\n\n            <BusDetail>\n                <BrCode>{{BusDetail.BrCode}}</BrCode>\n                <OffCode>{{BusDetail.OffCode}}</OffCode>\n                <CustCode>{{BusDetail.CustCode}}</CustCode>\n\n                {% if conditioningData.partyType == \"individual\" or conditioningData.isSoleProp ==\n                true %}\n                <InsiderCode>{{BusDetail.InsiderCode}}</InsiderCode>\n                <NetWorth>{{BusDetail.NetWorth}}</NetWorth>\n                {% endif %}\n\n                <NetWorthAmt>{{BusDetail.NetWorthAmt}}</NetWorthAmt>\n            </BusDetail>\n\n            <RegDetail>\n                <ReqLegalEntityType>{{RegDetail.ReqLegalEntityType}}</ReqLegalEntityType>\n\n                {% if conditioningData.partyType == \"individual\" %}\n                <BenflOwnExclCode>{{RegDetail.BenflOwnExclCode}}</BenflOwnExclCode>\n                {% endif %}\n\n                <AnnRevenueAmt>{{RegDetail.AnnRevenueAmt}}</AnnRevenueAmt>\n\n                <CRARec>\n                    <CRAStateCode>{{RegDetail.CRARec.CRAStateCode}}</CRAStateCode>\n                    <CRACountyCode>{{RegDetail.CRARec.CRACountyCode}}</CRACountyCode>\n                    <CRACenTract>{{RegDetail.CRARec.CRACenTract}}</CRACenTract>\n                    <CRASMSACode>{{RegDetail.CRARec.CRASMSACode}}</CRASMSACode>\n                    <CRAIncmLvl>{{RegDetail.CRARec.CRAIncmLvl}}</CRAIncmLvl>\n                </CRARec>\n            </RegDetail>\n        </CustAdd>\n    </SOAP-ENV:Body>\n\n</SOAP-ENV:Envelope>",
    "xml_error_path": "s:Envelope/s:Body/s:Fault/detail/HdrFault/FaultRecInfoArray/FaultMsgRec/ErrDesc",
    "xml_success_path": "s:Envelope/s:Body/CustAddResponse/CustId",
    "request_body_spec": "(\n(\n    . as $root |\n    $root.loan_relations[0] |\n    { \n        CustDetail: ( \n            {\n                PersonName: {\n                    ComName: (.full_name // null),\n                    FirstName: (.first_name // null),\n                    MiddleName: (.middle_name // null),\n                    LastName:  (.last_name // null),\n                    x_PersonName: {\n                        NameSuffix: (.suffix // null),\n                        LegalName: (.business_name // null)\n                    }\n                },\n                Addr: (\n                    .relation_addresses[] | \n                    select(.address_type == \"permanent\") |\n                    {\n                        StreetAddr1: (.address_line_1 // null),\n                        StreetAddr2: (.address_line_2 // null),\n                        City: (.city // null),\n                        StateCode: (.state // null),\n                        PostalCode: (.zip_code // null),\n                        DlvryPt: (.zip_code_plus4 // null),\n                    }\n                ),\n                CustType: (\n                    if .party_type == \"individual\"\n                        then \"Y\"\n                    elif .party_type == \"entity\"\n                        then \"N\"\n                    else null\n                    end\n                ),\n                NAICSCode: (.naics_code // null),\n                BirthDt: (if .party_type == \"individual\" then .dob else null end),\n                EmplName: ( .memberof // null),\n                EmailArray: {\n                    EmailInfo: {\n                        EmailAddr: (.email // null)\n                    }\n                },\n                PhoneArray: {\n                    PhoneInfo: {\n                        PhoneNum: (.work_phone | tostring // null),\n                        PhoneExt: \"+1\",\n                        PhoneType: (\n                            if .party_type == \"individual\" \n                                then \"Home Cell Phone\"\n                            elif .party_type == \"entity\" \n                                then \"Business Phone\"\n                            else null \n                            end\n                        )\n                    }\n                },\n                CrScoreArray: {\n                    CrScoreInfo: {\n                        CrScoreId: ($root.fico_score // null),\n                        CertCode: \"C\",\n                        CertCodeDt: \"2025-08-06\"\n                    }\n                }\n            }\n        ),\n        TaxDetail: (\n            {\n                TINInfo: {\n                    TINCode: (\n                        if .tin_type == \"EIN\" \n                            then \"T\" \n                        elif .tin_type == \"SSN\" \n                            then \"I\" \n                        else null \n                        end\n                    ),\n                    TaxId: (.tin // null),\n                    CertCode: \"C\",\n                },\n                Alien: {\n                    CitzCntryType: \"US\"\n                },\n                FedWithCode: \"0\",\n                StateWithCode: 0\n            }\n        ),\n        BusDetail: (\n            {\n                OffCode: \"BNO\",\n                BrCode: \"51\",\n                CustCode: \"Q\",\n                InsiderCode: (\n                    if (\n                        .party_type == \"individual\" \n                        and .entity_type != \"sole_proprietor\"\n                    )\n                        then \"E\"\n                    else null\n                    end\n                ),\n                NetWorth: (\n                    if .details?.total_business_net_worth \n                        then .details?.total_business_net_worth\n                    else null\n                    end\n                ),\n                LangType: \"English\",\n                NetWorthAmt: (\n                    if .details?.total_business_net_worth \n                        then .details?.total_business_net_worth\n                    else null\n                    end\n                )\n            }\n        ),\n        RegDetail: (\n            {\n                CRARec: (\n                    $root.geocoding_details[0] | \n                    {\n                        CRAStateCode: ($root.details.cra_details?.state_code // null),\n                        CRACountyCode: (.county_code // null),\n                        CRACenTract: (.tract_code // null),\n                        CRASMSACode: (.MSA_code // null),\n                        CRALoc: (.address // null),\n                        CRAIncmLvl: 1,\n                    }\n                ),\n                ReqLegalEntityType: (\n                    if .party_type == \"individual\"\n                        then false\n                    elif .party_type == \"entity\"\n                        then true\n                    else null\n                    end\n                ),\n                BenflOwnExclCode: (\n                    if .party_type == \"individual\"\n                        then \"NP\"\n                    else null\n                    end\n                ),\n                AnnRevenueAmt: ($root.cra_gross_annual_revenue // null)\n            }\n        ),\n        conditioningData:{\n            isSoleProp: (\n                if (\n                    .party_type == \"individual\" \n                    and .entity_type == \"sole_proprietor\" \n                    and .relation_type == \"borrower\"\n                    and (.is_collateral_related | not) \n                ) then true\n                else false\n                end\n            ),\n            ErrOvrRds: [410023, 410050, 410059, 410079, 410017],\n            entityType: (.entity_type // null),\n            partyType: (.party_type // null)\n        }\n    }\n)\n)",
    "response_body_spec": "{ apiSuccess: .apiSuccess, errors: { errorNum: (if (.errors.errorNum != \"\" and .errors.errorNum != null) then .errors.errorNum else null end), errorMsg: ((if (.errors.errorNum != \"\" and .errors.errorNum != null) then .errors.errorMsg.Error else null end)) }, responses: (if .apiSuccess == true then { customerid: .responses.Id } else null end) }",
    "request_body_spec_config": "{}",
    "response_body_spec_config": "{}"
}