{
    "xsd_name": "TPG_CustomerMaster",
    "xml_template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SOAP-ENV:Envelope\n    xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n    <SOAP-ENV:Header>\n        <wsse:Security\n            xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"\n            xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n            <wsse:UsernameToken\n                xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">\n                <wsse:Username>{{XUserName}}</wsse:Username>\n                <wsse:Password\n                    Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">\n                    {{XPassword}}</wsse:Password>\n                <wsu:Created\n                    xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n                    {{current_timestamp}}</wsu:Created>\n            </wsse:UsernameToken>\n        </wsse:Security>\n    </SOAP-ENV:Header>\n    <SOAP-ENV:Body>\n        <CustRelAdd\n            xmlns=\"http://jackhenry.com/jxchange/TPG/2008\">\n            <MsgRqHdr>\n                <jXchangeHdr>\n                    <JxVer />\n                    <AuditUsrId>{{XAuditUser}}</AuditUsrId>\n                    <AuditWsId>{{XAuditWorkStation}}</AuditWsId>\n                    <AuthenUsrId />\n                    <ConsumerName />\n                    <ConsumerProd />\n                    <Ver_1 />\n                    <jXLogTrackingId>{{$guid}}</jXLogTrackingId>\n                    <Ver_2 />\n                    <InstRtId>{{XInstitutionRoutingID}}</InstRtId>\n                    <InstEnv>{{XEnvironment}}</InstEnv>\n                    <Ver_3 />\n                    <BusCorrelId>{{$guid}}</BusCorrelId>\n                    <Ver_4 />\n                    <WorkflowCorrelId />\n                    <Ver_5 />\n                    <ValidConsmName>{{XValidConsumerName}}</ValidConsmName>\n                    <ValidConsmProd>{{XValidConsumerProduct}}</ValidConsmProd>\n                    <Ver_6 />\n                </jXchangeHdr>\n                <Ver_1 />\n                <Ver_2 />\n                <Ver_3 />\n            </MsgRqHdr>\n            <CustId>{{CustRelAdd.CustId}}</CustId>\n            <CustRelRec>\n                <Ver_1 />\n                <Ver_2 />\n                <Ver_3 />\n                <IdVerifyBy>{{CustRelAdd.CustRelRec.IdVerifyBy}}</IdVerifyBy>\n                <IdVerifyRsnCode>{{CustRelAdd.CustRelRec.IdVerifyRsnCode}}</IdVerifyRsnCode>\n                <VerifyDt>{{CustRelAdd.CustRelRec.VerifyDt}}</VerifyDt>\n                <Ver_4 />\n            </CustRelRec>\n            <Ver_1 />\n            <BenflOwnInfo>\n                <CustId>{{CustRelAdd.BenflOwnInfo.CustId}}</CustId>\n                <PersonName>\n                    <ComName>{{CustRelAdd.BenflOwnInfo.PersonName.ComName}}</ComName>\n                    <Ver_1 />\n                </PersonName>\n                <BenflOwnType>{{CustRelAdd.BenflOwnInfo.BenflOwnType}}</BenflOwnType>\n                <CntlIndivTitle>{{CustRelAdd.BenflOwnInfo.CntlIndivTitle}}</CntlIndivTitle>\n                <BenflOwnPct>{{CustRelAdd.BenflOwnInfo.BenflOwnPct}}</BenflOwnPct>\n                <Ver_1 />\n            </BenflOwnInfo>\n            <Ver_2 />\n            <Ver_3 />\n        </CustRelAdd>\n    </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>",
    "xml_error_path": "s:Envelope/s:Body/s:Fault/detail/HdrFault/FaultRecInfoArray/FaultMsgRec/ErrDesc",
    "validation_spec": "{}",
    "xml_success_path": "s:Envelope/s:Body/CustRelAddResponse/RsStat",
    "request_body_spec": "(\n    . as $root |\n    { \n        CustId: ( \n            $root.flat_relations | \n            map(select(.id == $root.id))[0].parent_id as $pid | \n            map(select(.id == $pid))[0].external_customer_id // \"\"\n        ),\n        CustRelRec: { \n            IdVerifyBy: ($root.loan_officer_name // null),\n            IdVerifyRsnCode: \"NEW\",\n            VerifyDt: \"2024-02-28\" \n        },\n        BenflOwnInfo:( \n            $root.loan_relations[0] | \n            { \n                CustId: .external_customer_id,\n                PersonName: { \n                    ComName: (.full_name // null)\n                },\n                BenflOwnType: (\n                    if .is_ben_owner_by_control \n                        then (\n                            if .ownership_percentage \n                                then \"CntlOwn\" \n                            else \"Cntl\" \n                            end\n                        ) \n                    else \"Own\"\n                    end\n                ),\n                CntlIndivTitle: ( .title // null),\n                BenflOwnPct: ( .ownership_percentage // 0),\n            }\n        )\n    }\n)",
    "response_body_spec": "{ apiSuccess: .apiSuccess, errors: { errorNum: (if (.errors.errorNum != \"\" and .errors.errorNum != null) then .errors.errorNum else null end), errorMsg: ((if (.errors.errorNum != \"\" and .errors.errorNum != null) then .errors.errorMsg.Error else null end)) }, responses: (if .apiSuccess == true and .responses.Id then [{ status: .responses.Id }] else [] end) }",
    "request_body_spec_config": "{}",
    "response_body_spec_config": "{}"
}