{
    "validation_spec": "{}",
    "request_body_spec": "(\n{\n    Input: {\n        ExtensionRequests: null,\n        Requests: [\n            {\n                __type: \"CollateralMaintenanceRequest:http://www.opensolutions.com/CoreApi\",\n                ParentRequestNumber: null,\n                RequestNumber: null,\n                PropertyList: ( . as $root |\n                    if ( $root | has(\"loan_collateral\"))\n                        then( $root.loan_collateral[0] | [\n                            {\n                                CollateralMargin: (\n                                    (\n                                        {\n                                            AcceptDate: \"/Date(\\(now*1000 | floor))/\",\n                                            EffectiveDate: \"/Date(\\(now*1000 | floor))/\",\n                                            AccountNumber: ($root.loan_number // null),\n                                        }\n                                    ) + \n                                    (\n                                        if ( .category | IN(\"residential_real_estate\", \"commercial_real_estate\", \"land\") )\n                                            then { \n                                                MarginPercent: ( .details.collateral_margin | tonumber? / 100 ) \n                                            }\n                                        else {}\n                                        end\n                                    )\n                                ),\n                                PropertyNumber: (\n                                    if (.details | has(\"core_integration_create_collaterals\"))\n                                        then (\n                                            .details.core_integration_create_collaterals\n                                            | .responses[0]?.collateralId? // null\n                                        )\n                                    else null\n                                    end\n                                )\n                            }\n                        ])\n                    else {\n                        CollateralMargin:{\n                            AcceptDate: \"/Date(\\(now*1000 | floor))/\",\n                            EffectiveDate: \"/Date(\\(now*1000 | floor))/\",\n                            AccountNumber: ($root.loan_number // null),\n                        },\n                        PropertyNumber: (\n                            if ($root.details | has(\"core_integration_create_collaterals\"))\n                                then (\n                                    $root.details.core_integration_create_collaterals\n                                    | .responses[0]?.collateralId? // null\n                                )\n                            else null\n                            end\n                        )\n                    }\n                    end \n                )\n            }\n        ],\n        UserAuthentication: {}\n    },\n    ShouldCommitOrRollback: false\n}\n)",
    "response_body_spec": "(\n    (\n        .apiSuccess \n        and all(.responses.Output.Responses[]; .WasSuccessful)\n    ) as $isSuccess |\n    .responses | {\n        apiSuccess: $isSuccess,\n        errors: ( if ($isSuccess | not)\n            then \n            {\n                errorNum: (.Output.Responses[0].Errors[0].ErrorNumber // 400),\n                errorMsg: (.Output.Responses[0].Errors[0].ErrorMessage // \"Something went wrong\")\n            }\n            else null\n            end\n        ),\n        responses: ( if ($isSuccess and .Output.Responses[0].CollateralPropertyList)\n            then [ .Output.Responses[0].CollateralPropertyList[] \n            | {\n                collateralId: .PropertyNumber\n            } ]\n            else null\n            end\n        )\n    }\n)",
    "request_body_spec_config": "{}",
    "response_body_spec_config": "{}"
}